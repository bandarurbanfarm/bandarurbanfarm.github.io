<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bandar Urban Farm</title>
    <style>
        :root {
            --primary-color: #22c55e;
            --secondary-color: #10b981;
            --text-color: #1f2937;
            --light-text: #6b7280;
            --bg-color: #f9fafb;
            --card-bg: #ffffff;
            --border-color: #e5e7eb;
            --shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
            --hover-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            line-height: 1.6;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        /* Header Styles */
        header {
            background-color: white;
            box-shadow: var(--shadow);
            border-bottom: 1px solid var(--border-color);
            padding: 24px 0;
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .header-content {
            display: flex;
            flex-direction: column;
            gap: 16px;
        }

        .header-top {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            display: flex;
            flex-direction: column;
        }

        .logo h1 {
            font-size: 2rem;
            font-weight: 700;
            color: var(--primary-color);
        }

        .logo p {
            color: var(--light-text);
            font-size: 0.9rem;
        }

        .search-container {
            position: relative;
            width: 100%;
            max-width: 300px;
        }

        .search-input {
            width: 100%;
            padding: 10px 12px 10px 40px;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            font-size: 0.9rem;
            transition: all 0.3s ease;
        }

        .search-input:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(34, 197, 94, 0.1);
        }

        .search-icon {
            position: absolute;
            left: 12px;
            top: 50%;
            transform: translateY(-50%);
            color: var(--light-text);
        }

        /* Main Content Styles */
        main {
            padding: 40px 0;
        }

        .posts-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 32px;
        }

        @media (min-width: 768px) {
            .posts-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (min-width: 1024px) {
            .posts-grid {
                grid-template-columns: repeat(3, 1fr);
            }
        }

        .post-card {
            background-color: var(--card-bg);
            border-radius: 12px;
            box-shadow: var(--shadow);
            overflow: hidden;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .post-card:hover {
            box-shadow: var(--hover-shadow);
            transform: translateY(-2px);
        }

        .post-image {
            width: 100%;
            height: 200px;
            object-fit: cover;
            display: block;
        }

        .post-content {
            padding: 24px;
        }

        .post-meta {
            display: flex;
            align-items: center;
            font-size: 0.85rem;
            color: var(--light-text);
            margin-bottom: 12px;
            flex-wrap: wrap;
            gap: 8px;
        }

        .post-meta span:not(:last-child) {
            margin-right: 8px;
        }

        .post-meta .separator {
            color: var(--light-text);
        }

        .post-title {
            font-size: 1.25rem;
            font-weight: 600;
            margin-bottom: 16px;
            line-height: 1.4;
            color: var(--text-color);
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }

        .post-title:hover {
            color: var(--primary-color);
        }

        .post-excerpt {
            color: var(--light-text);
            margin-bottom: 20px;
            display: -webkit-box;
            -webkit-line-clamp: 3;
            -webkit-box-orient: vertical;
            overflow: hidden;
            font-size: 0.95rem;
        }

        .post-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
        }

        .tag {
            background-color: #f3f4f6;
            color: #4b5563;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.75rem;
            font-weight: 500;
        }

        /* Pagination */
        .pagination {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 8px;
            margin-top: 40px;
        }

        .pagination-btn {
            padding: 8px 16px;
            border: 1px solid var(--border-color);
            background-color: white;
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.9rem;
            transition: all 0.2s ease;
        }

        .pagination-btn:hover:not(:disabled) {
            background-color: #f3f4f6;
        }

        .pagination-btn.active {
            background-color: var(--primary-color);
            color: white;
            border-color: var(--primary-color);
        }

        .pagination-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        /* Empty State */
        .empty-state {
            text-align: center;
            padding: 60px 20px;
        }

        .empty-icon {
            width: 48px;
            height: 48px;
            margin: 0 auto 24px;
            color: #9ca3af;
        }

        .empty-title {
            font-size: 1.25rem;
            font-weight: 600;
            margin-bottom: 8px;
            color: var(--text-color);
        }

        .empty-message {
            color: var(--light-text);
            margin-bottom: 24px;
            max-width: 500px;
            margin-left: auto;
            margin-right: auto;
        }

        .clear-btn {
            padding: 10px 20px;
            background-color: var(--primary-color);
            color: white;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-weight: 500;
            transition: background-color 0.2s ease;
        }

        .clear-btn:hover {
            background-color: #16a34a;
        }

        /* Post Detail View */
        .post-detail {
            max-width: 800px;
            margin: 0 auto;
            padding: 40px 20px;
        }

        .back-btn {
            display: inline-flex;
            align-items: center;
            color: var(--primary-color);
            font-weight: 500;
            margin-bottom: 24px;
            cursor: pointer;
            transition: color 0.2s ease;
        }

        .back-btn:hover {
            color: #16a34a;
        }

        .post-detail-title {
            font-size: 2rem;
            font-weight: 700;
            margin-bottom: 16px;
            line-height: 1.3;
        }

        .post-detail-meta {
            display: flex;
            flex-wrap: wrap;
            align-items: center;
            font-size: 0.9rem;
            color: var(--light-text);
            margin-bottom: 16px;
            gap: 16px;
        }

        .permalink {
            display: flex;
            align-items: center;
            font-size: 0.9rem;
            color: var(--primary-color);
            margin-bottom: 24px;
            padding: 12px;
            background-color: #f0fdf4;
            border-radius: 6px;
            border: 1px solid #bbf7d0;
        }

        .permalink-icon {
            margin-right: 8px;
        }

        .copy-permalink {
            margin-left: 8px;
            cursor: pointer;
            color: var(--secondary-color);
        }

        .copy-permalink:hover {
            text-decoration: underline;
        }

        .post-detail-image {
            width: 100%;
            height: 400px;
            object-fit: cover;
            border-radius: 12px;
            margin-bottom: 32px;
        }

        .post-detail-content {
            font-size: 1.1rem;
            line-height: 1.8;
            margin-bottom: 40px;
            color: var(--text-color);
        }

        .post-detail-tags {
            border-top: 1px solid var(--border-color);
            padding-top: 24px;
            margin-bottom: 40px;
        }

        .post-detail-tags h3 {
            font-size: 1.1rem;
            font-weight: 600;
            margin-bottom: 16px;
        }

        .share-section {
            border-top: 1px solid var(--border-color);
            padding-top: 32px;
            margin-top: 24px;
        }

        .share-section h3 {
            font-size: 1.25rem;
            font-weight: 600;
            margin-bottom: 20px;
        }

        .share-buttons {
            display: flex;
            gap: 12px;
        }

        .share-btn {
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            color: white;
            font-weight: 500;
            cursor: pointer;
            transition: opacity 0.2s ease;
        }

        .share-btn:hover {
            opacity: 0.9;
        }

        .facebook-btn {
            background-color: #1877f2;
        }

        .twitter-btn {
            background-color: #1da1f2;
        }

        .linkedin-btn {
            background-color: #0077b5;
        }

        /* Footer */
        footer {
            background-color: white;
            border-top: 1px solid var(--border-color);
            padding: 60px 0 30px;
            margin-top: 80px;
        }

        .footer-content {
            text-align: center;
            margin-bottom: 40px;
        }

        .footer-logo {
            font-size: 1.5rem;
            font-weight: 700;
            margin-bottom: 8px;
            color: var(--primary-color);
        }

        .footer-description {
            color: var(--light-text);
            margin-bottom: 24px;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
        }

        .social-links {
            display: flex;
            justify-content: center;
            gap: 24px;
            margin-bottom: 40px;
        }

        .social-link {
            color: #9ca3af;
            font-size: 1.5rem;
            transition: color 0.2s ease;
        }

        .social-link:hover {
            color: var(--text-color);
        }

        .copyright {
            text-align: center;
            color: var(--light-text);
            font-size: 0.9rem;
            padding-top: 24px;
            border-top: 1px solid var(--border-color);
        }

        /* Loading Spinner */
        .loading-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 300px;
        }

        .spinner {
            width: 48px;
            height: 48px;
            border: 4px solid rgba(34, 197, 94, 0.1);
            border-top: 4px solid var(--primary-color);
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-bottom: 16px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .loading-text {
            color: var(--light-text);
        }

        /* Toast Notification */
        .toast {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            background-color: #16a34a;
            color: white;
            padding: 12px 24px;
            border-radius: 6px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
            z-index: 1000;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .toast.show {
            opacity: 1;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .header-top {
                flex-direction: column;
                align-items: flex-start;
                gap: 16px;
            }

            .search-container {
                max-width: 100%;
            }

            .post-detail-image {
                height: 300px;
            }

            .post-detail-title {
                font-size: 1.5rem;
            }
        }

        /* Utility Classes */
        .hidden {
            display: none !important;
        }

        .fade-in {
            animation: fadeIn 0.5s ease-in;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header>
        <div class="container header-content">
            <div class="header-top">
                <div class="logo">
                    <h1>Bandar Urban Farm</h1>
                    <p>Transforming urban spaces into thriving gardens</p>
                </div>
                <div class="search-container">
                    <span class="search-icon">🔍</span>
                    <input type="text" class="search-input" id="searchInput" placeholder="Search posts...">
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="container">
        <!-- Loading State -->
        <div id="loading" class="loading-container">
            <div class="spinner"></div>
            <p class="loading-text">Loading blog posts...</p>
        </div>

        <!-- Blog Posts Grid -->
        <div id="postsGrid" class="posts-grid hidden"></div>

        <!-- Empty State -->
        <div id="emptyState" class="empty-state hidden">
            <svg class="empty-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.172 16.172a4 4 0 015.656 0M9 12h6m-6-4h6m2 5.291A7.962 7.962 0 0112 15c-2.34 0-4.467-.827-6.08-2.147M12 15v2m-6-2v2m12-2v2"></path>
            </svg>
            <h3 class="empty-title">No posts found</h3>
            <p class="empty-message">Try adjusting your search or filter to find what you're looking for.</p>
            <button id="clearSearch" class="clear-btn">Clear search</button>
        </div>

        <!-- Pagination -->
        <div id="pagination" class="pagination hidden"></div>
    </main>

    <!-- Post Detail View -->
    <div id="postDetail" class="post-detail hidden">
        <button id="backBtn" class="back-btn">← Back to Bandar Urban Farm</button>
        <h1 id="detailTitle" class="post-detail-title"></h1>
        <div id="detailMeta" class="post-detail-meta"></div>
        <div id="permalink" class="permalink">
            <span class="permalink-icon">🔗</span>
            <span id="permalinkUrl"></span>
            <span id="copyPermalink" class="copy-permalink">Copy link</span>
        </div>
        <img id="detailImage" class="post-detail-image" src="" alt="">
        <div id="detailContent" class="post-detail-content"></div>
        
        <div class="post-detail-tags">
            <h3>Tags:</h3>
            <div id="detailTags" class="post-tags"></div>
        </div>

        <div class="share-section">
            <h3>Share this post</h3>
            <div class="share-buttons">
                <button class="share-btn facebook-btn">Facebook</button>
                <button class="share-btn twitter-btn">Twitter</button>
                <button class="share-btn linkedin-btn">LinkedIn</button>
            </div>
        </div>
    </div>

    <!-- Toast Notification -->
    <div id="toast" class="toast">Link copied to clipboard!</div>

    <!-- Footer -->
    <footer>
        <div class="container">
            <div class="footer-content">
                <h3 class="footer-logo">Bandar Urban Farm</h3>
                <p class="footer-description">Growing communities, one urban garden at a time</p>
                <div class="social-links">
                    <a href="#" class="social-link">📘</a>
                    <a href="#" class="social-link">🐦</a>
                    <a href="#" class="social-link">📸</a>
                </div>
            </div>
            <div class="copyright">
                &copy; 2024 Bandar Urban Farm. All rights reserved.
            </div>
        </div>
    </footer>

    <script>
        // Mock blog data with permalinks
        const blogPosts = [
            {
                id: 1,
                slug: "vertical-gardening-in-small-spaces",
                title: "Vertical Gardening: Maximizing Small Urban Spaces",
                author: "Sarah Green",
                date: "2024-01-15",
                content: "Vertical gardening is revolutionizing how we think about urban farming. When space is limited, growing upwards rather than outwards becomes essential. This comprehensive guide explores various vertical gardening techniques, from simple trellises to sophisticated hydroponic wall systems. We'll cover which plants work best for vertical growth, how to ensure proper irrigation, and creative DIY solutions for renters and homeowners alike. With the right approach, even the smallest balcony or patio can become a lush, productive garden that provides fresh produce and enhances your living space.",
                excerpt: "Learn how to transform your limited urban space into a productive vertical garden with these practical techniques.",
                image: "https://placehold.co/800x400/22c55e/ffffff?text=Vertical+Gardening",
                tags: ["vertical gardening", "small spaces", "urban farming", "DIY"]
            },
            {
                id: 2,
                slug: "container-gardening-for-beginners",
                title: "Container Gardening 101: Perfect for Urban Dwellers",
                author: "Mike Thompson",
                date: "2024-01-12",
                content: "Container gardening is the perfect entry point for urban residents looking to grow their own food. This beginner's guide covers everything you need to know, from selecting the right containers and soil mixtures to choosing plants that thrive in pots. We'll discuss drainage requirements, sunlight considerations, and how to prevent common problems like root rot and nutrient deficiencies. Whether you have a sunny windowsill, a balcony, or a small patio, you'll discover how to create a thriving container garden that provides fresh herbs, vegetables, and flowers throughout the growing season.",
                excerpt: "Start your urban farming journey with this comprehensive guide to container gardening for beginners.",
                image: "https://placehold.co/800x400/10b981/ffffff?text=Container+Gardening",
                tags: ["container gardening", "beginners", "urban farming", "herbs"]
            },
            {
                id: 3,
                slug: "composting-in-apartments",
                title: "Composting in Apartments: No Yard Required",
                author: "Lisa Chen",
                date: "2024-01-10",
                content: "You don't need a backyard to create nutrient-rich compost for your urban garden. This guide explores various apartment-friendly composting methods, including vermicomposting (worm composting), bokashi fermentation, and electric composters. We'll cover what materials you can compost, how to avoid odors and pests, and how to use your finished compost to nourish your plants. With a little planning and the right system, you can turn your kitchen scraps into 'black gold' that will supercharge your urban farm while reducing your household waste.",
                excerpt: "Discover how to turn kitchen scraps into nutrient-rich compost even in the smallest urban apartments.",
                image: "https://placehold.co/800x400/8b5cf6/ffffff?text=Apartment+Composting",
                tags: ["composting", "apartments", "sustainability", "zero waste"]
            },
            {
                id: 4,
                slug: "balcony-vegetable-garden",
                title: "Creating a Productive Balcony Vegetable Garden",
                author: "David Rodriguez",
                date: "2024-01-08",
                content: "Your balcony holds untapped potential as a productive vegetable garden. This detailed guide walks you through assessing your balcony's conditions (sun exposure, wind patterns, weight limits) and selecting the perfect vegetables for your space. We'll cover container selection, soil preparation, watering systems, and companion planting techniques specifically designed for balcony environments. Learn which vegetables thrive in containers, how to maximize yields in limited space, and creative solutions for common balcony gardening challenges like limited sunlight or exposure to wind.",
                excerpt: "Transform your balcony into a productive vegetable garden with these expert tips and techniques.",
                image: "https://placehold.co/800x400/f59e0b/ffffff?text=Balcony+Garden",
                tags: ["balcony garden", "vegetables", "urban farming", "containers"]
            },
            {
                id: 5,
                slug: "indoor-herb-garden-year-round",
                title: "Year-Round Indoor Herb Garden: Fresh Flavors at Your Fingertips",
                author: "Emma Wilson",
                date: "2024-01-05",
                content: "Imagine snipping fresh basil, rosemary, or mint for your meals regardless of the season outside. This guide shows you how to create a thriving indoor herb garden that provides fresh flavors year-round. We'll cover lighting requirements (including affordable grow light options), proper watering techniques, choosing the right containers with adequate drainage, and selecting herbs that adapt well to indoor conditions. You'll also learn about harvesting techniques that encourage continued growth and how to troubleshoot common problems like leggy growth or pest infestations.",
                excerpt: "Keep fresh herbs growing in your kitchen all year with this comprehensive indoor gardening guide.",
                image: "https://placehold.co/800x400/ef4444/ffffff?text=Indoor+Herbs",
                tags: ["indoor gardening", "herbs", "year-round", "kitchen garden"]
            },
            {
                id: 6,
                slug: "community-gardening-benefits",
                title: "The Surprising Benefits of Community Gardening",
                author: "James Park",
                date: "2024-01-03",
                content: "Community gardens offer benefits that extend far beyond fresh produce. This article explores the social, psychological, and environmental advantages of participating in or establishing a community garden in your neighborhood. From building stronger community bonds and reducing crime rates to improving mental health and creating urban biodiversity hotspots, community gardens are powerful tools for positive change. We'll also cover practical tips for starting a community garden, navigating local regulations, and fostering inclusive participation that benefits all members of your community.",
                excerpt: "Discover the far-reaching social, psychological, and environmental benefits of community gardening initiatives.",
                image: "https://placehold.co/800x400/06b6d4/ffffff?text=Community+Garden",
                tags: ["community garden", "social benefits", "urban planning", "sustainability"]
            },
            {
                id: 7,
                slug: "rainwater-harvesting-urban-farms",
                title: "Rainwater Harvesting for Urban Farms: Conservation and Savings",
                author: "Tom Lee",
                date: "2023-12-28",
                content: "Rainwater harvesting is an essential practice for sustainable urban farming. This comprehensive guide covers various rainwater collection systems suitable for urban environments, from simple barrel setups to more sophisticated filtration and storage solutions. We'll discuss local regulations, calculating your water needs, proper maintenance to prevent mosquito breeding, and creative ways to integrate rainwater harvesting into your existing urban farm setup. Learn how to reduce your water bills, conserve this precious resource, and create a more resilient gardening system that can withstand drought conditions.",
                excerpt: "Implement rainwater harvesting in your urban farm to conserve water and reduce utility costs.",
                image: "https://placehold.co/800x400/22c55e/ffffff?text=Rainwater+Harvesting",
                tags: ["rainwater harvesting", "water conservation", "sustainability", "urban farming"]
            },
            {
                id: 8,
                slug: "pollinator-friendly-urban-gardens",
                title: "Creating Pollinator-Friendly Urban Gardens",
                author: "Anna Martinez",
                date: "2023-12-25",
                content: "Pollinators are essential for productive urban gardens, yet many cities have become 'food deserts' for bees, butterflies, and other beneficial insects. This guide shows you how to transform your urban garden into a pollinator paradise. We'll cover selecting native plants that attract and nourish pollinators, creating habitat features like bee hotels and butterfly puddling stations, avoiding harmful pesticides, and designing your garden layout to maximize pollinator visits. By making your urban farm pollinator-friendly, you'll not only increase your yields but also contribute to the vital conservation of these essential creatures.",
                excerpt: "Transform your urban garden into a haven for bees, butterflies, and other essential pollinators.",
                image: "https://placehold.co/800x400/ec4899/ffffff?text=Pollinator+Garden",
                tags: ["pollinators", "bees", "butterflies", "native plants"]
            }
        ];

        // DOM Elements
        const loadingElement = document.getElementById('loading');
        const postsGridElement = document.getElementById('postsGrid');
        const emptyStateElement = document.getElementById('emptyState');
        const paginationElement = document.getElementById('pagination');
        const searchInput = document.getElementById('searchInput');
        const clearSearchBtn = document.getElementById('clearSearch');
        const postDetailElement = document.getElementById('postDetail');
        const backBtn = document.getElementById('backBtn');
        const detailTitleElement = document.getElementById('detailTitle');
        const detailMetaElement = document.getElementById('detailMeta');
        const detailImageElement = document.getElementById('detailImage');
        const detailContentElement = document.getElementById('detailContent');
        const detailTagsElement = document.getElementById('detailTags');
        const permalinkElement = document.getElementById('permalink');
        const permalinkUrlElement = document.getElementById('permalinkUrl');
        const copyPermalinkElement = document.getElementById('copyPermalink');
        const toastElement = document.getElementById('toast');

        // State
        let currentPage = 1;
        const postsPerPage = 6;
        let searchTerm = '';
        let filteredPosts = [...blogPosts];
        let currentPost = null;

        // Format date
        function formatDate(dateString) {
            const options = { year: 'numeric', month: 'long', day: 'numeric' };
            return new Date(dateString).toLocaleDateString(undefined, options);
        }

        // Generate permalink URL
        function generatePermalink(post) {
            const baseUrl = window.location.origin + window.location.pathname;
            return `${baseUrl}#${post.slug}`;
        }

        // Create post card
        function createPostCard(post) {
            const card = document.createElement('article');
            card.className = 'post-card fade-in';
            card.innerHTML = `
                <img src="${post.image}" alt="${post.title}" class="post-image">
                <div class="post-content">
                    <div class="post-meta">
                        <span>${post.author}</span>
                        <span class="separator">•</span>
                        <span>${formatDate(post.date)}</span>
                    </div>
                    <h2 class="post-title">${post.title}</h2>
                    <p class="post-excerpt">${post.excerpt}</p>
                    <div class="post-tags">
                        ${post.tags.slice(0, 3).map(tag => `<span class="tag">${tag}</span>`).join('')}
                        ${post.tags.length > 3 ? `<span class="tag">+${post.tags.length - 3}</span>` : ''}
                    </div>
                </div>
            `;
            
            card.addEventListener('click', () => showPostDetail(post));
            return card;
        }

        // Show post detail
        function showPostDetail(post) {
            currentPost = post;
            
            // Hide grid and show detail
            postsGridElement.classList.add('hidden');
            paginationElement.classList.add('hidden');
            postDetailElement.classList.remove('hidden');
            
            // Populate detail view
            detailTitleElement.textContent = post.title;
            detailMetaElement.innerHTML = `
                <span>By ${post.author}</span>
                <span>${formatDate(post.date)}</span>
            `;
            
            // Set permalink
            const permalinkUrl = generatePermalink(post);
            permalinkUrlElement.textContent = permalinkUrl;
            
            detailImageElement.src = post.image;
            detailImageElement.alt = post.title;
            detailContentElement.textContent = post.content;
            
            // Clear and populate tags
            detailTagsElement.innerHTML = '';
            post.tags.forEach(tag => {
                const tagElement = document.createElement('span');
                tagElement.className = 'tag';
                tagElement.textContent = tag;
                detailTagsElement.appendChild(tagElement);
            });
            
            // Update URL hash
            history.pushState(null, '', `#${post.slug}`);
            
            // Scroll to top
            window.scrollTo(0, 0);
        }

        // Show posts grid
        function showPostsGrid() {
            postDetailElement.classList.add('hidden');
            postsGridElement.classList.remove('hidden');
            if (filteredPosts.length > postsPerPage) {
                paginationElement.classList.remove('hidden');
            }
            currentPost = null;
            history.pushState(null, '', window.location.pathname);
            window.scrollTo(0, 0);
        }

        // Render posts
        function renderPosts() {
            // Clear grid
            postsGridElement.innerHTML = '';
            
            // Calculate pagination
            const indexOfLastPost = currentPage * postsPerPage;
            const indexOfFirstPost = indexOfLastPost - postsPerPage;
            const currentPosts = filteredPosts.slice(indexOfFirstPost, indexOfLastPost);
            
            // Render posts
            currentPosts.forEach(post => {
                const postCard = createPostCard(post);
                postsGridElement.appendChild(postCard);
            });
            
            // Render pagination
            renderPagination();
        }

        // Render pagination
        function renderPagination() {
            paginationElement.innerHTML = '';
            
            const totalPages = Math.ceil(filteredPosts.length / postsPerPage);
            
            if (totalPages <= 1) return;
            
            // Previous button
            const prevBtn = document.createElement('button');
            prevBtn.className = 'pagination-btn';
            prevBtn.innerHTML = 'Previous';
            prevBtn.disabled = currentPage === 1;
            prevBtn.addEventListener('click', () => {
                if (currentPage > 1) {
                    currentPage--;
                    renderPosts();
                    window.scrollTo(0, 0);
                }
            });
            paginationElement.appendChild(prevBtn);
            
            // Page numbers
            for (let i = 1; i <= totalPages; i++) {
                const pageBtn = document.createElement('button');
                pageBtn.className = `pagination-btn ${i === currentPage ? 'active' : ''}`;
                pageBtn.textContent = i;
                pageBtn.addEventListener('click', () => {
                    currentPage = i;
                    renderPosts();
                    window.scrollTo(0, 0);
                });
                paginationElement.appendChild(pageBtn);
            }
            
            // Next button
            const nextBtn = document.createElement('button');
            nextBtn.className = 'pagination-btn';
            nextBtn.innerHTML = 'Next';
            nextBtn.disabled = currentPage === totalPages;
            nextBtn.addEventListener('click', () => {
                if (currentPage < totalPages) {
                    currentPage++;
                    renderPosts();
                    window.scrollTo(0, 0);
                }
            });
            paginationElement.appendChild(nextBtn);
        }

        // Filter posts
        function filterPosts() {
            searchTerm = searchInput.value.toLowerCase();
            filteredPosts = blogPosts.filter(post =>
                post.title.toLowerCase().includes(searchTerm) ||
                post.content.toLowerCase().includes(searchTerm) ||
                post.tags.some(tag => tag.toLowerCase().includes(searchTerm))
            );
            
            currentPage = 1;
            
            // Show appropriate view
            if (filteredPosts.length === 0) {
                emptyStateElement.classList.remove('hidden');
                postsGridElement.classList.add('hidden');
                paginationElement.classList.add('hidden');
            } else {
                emptyStateElement.classList.add('hidden');
                postsGridElement.classList.remove('hidden');
                renderPosts();
            }
        }

        // Copy permalink to clipboard
        function copyToClipboard(text) {
            navigator.clipboard.writeText(text).then(() => {
                // Show toast notification
                toastElement.classList.add('show');
                setTimeout(() => {
                    toastElement.classList.remove('show');
                }, 3000);
            });
        }

        // Check URL hash on load and navigate to post if present
        function checkUrlHash() {
            const hash = window.location.hash.substring(1);
            if (hash) {
                const post = blogPosts.find(p => p.slug === hash);
                if (post) {
                    showPostDetail(post);
                }
            }
        }

        // Initialize
        function init() {
            // Simulate loading
            setTimeout(() => {
                loadingElement.classList.add('hidden');
                postsGridElement.classList.remove('hidden');
                renderPosts();
                
                // Check if there's a post slug in the URL
                checkUrlHash();
            }, 1000);
            
            // Event listeners
            searchInput.addEventListener('input', filterPosts);
            clearSearchBtn.addEventListener('click', () => {
                searchInput.value = '';
                filterPosts();
            });
            backBtn.addEventListener('click', showPostsGrid);
            copyPermalinkElement.addEventListener('click', () => {
                if (currentPost) {
                    copyToClipboard(generatePermalink(currentPost));
                }
            });
            
            // Handle browser back/forward buttons
            window.addEventListener('popstate', () => {
                const hash = window.location.hash.substring(1);
                if (hash) {
                    const post = blogPosts.find(p => p.slug === hash);
                    if (post) {
                        showPostDetail(post);
                    } else {
                        showPostsGrid();
                    }
                } else {
                    showPostsGrid();
                }
            });
        }

        // Start the application
        document.addEventListener('DOMContentLoaded', init);
    </script>
</body>
</html>
```
